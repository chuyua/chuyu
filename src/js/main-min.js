function blogging_info(t){console.log("%c Blogging %c "+t+" %c", "background:#35495e ; padding: 1px; border-radius: 3px 0 0 3px; color:#fff", "background:#41b883 ; padding: 1px; border-radius: 0 3px 3px 0; color: #fff" ,"background: transparent");}function whenAvailable(t,e){window.setTimeout((function(){window[t]?e(window[t]):window.setTimeout(arguments.callee,100)}),100)}function getpar(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var s=e[n].split("=");if(s[0]==t&&null==s[1])return!0;if(s[0]==t)return s[1]}return!1}if(getpar("p"))settings={par:"p"};else if(getpar("url"))var settings={par:"url"};else if(getpar("page"))var settings={par:"page"};else window.location.search="?page=home";let t="/";var comment,config,mdcontent;for(let e of window.location.pathname.split("/").slice(1,-1))t=t+e+"/";settings.domain=window.location.protocol+"//"+window.location.host+t,blogging_info("init Blogging ..."),fetch("config.json").then(t=>{if(t.status>=200&&t.status<300)return blogging_info("Load config"),t;document.all[0].innerHTML="<h1>Error fetch config.json<br>Status Code="+t.status+"</h1>"}).then(t=>t.json()).then(t=>{for(i in config=t,settings.themeUrl=settings.domain+config.file.theme+config.theme+"/",settings.post=settings.domain+config.file.post,config.comment.config)comment=config.comment.config[i]}).then(t=>{a=document.createElement("link"),a.rel="prefetch","page"===settings.par?a.href=settings.themeUrl+"html/"+getpar(settings.par)+".html":"url"!==settings.par&&"p"!==settings.par||(a.href=settings.themeUrl+"html/200.html"),document.head.append(a)}).then(()=>{blogging_info("Load Plugin who loadtime = init");for(let t in config.plugins)if("init"==config.plugins[t].loadtime){blogging_info("Load "+config.plugins[t].name+" with defer enabled "+config.plugins[t].defer);for(let e in config.plugins[t].depend){let n=document.createElement("script");n.src=config.plugins[t].depend[e],document.head.append(n)}let e=document.createElement("script");e.src=config.plugins[t].script,config.plugins[t].defer&&(e.defer=!0),document.head.append(e)}}).then(()=>{whenAvailable("markdownrender",()=>(blogging_info("Markdown Render Load finish"),114514))}).then((function(){"url"===settings.par?(blogging_info("Load post"),settings.content={url:decodeURIComponent(getpar(settings.par))},fetch(settings.content.url).then(t=>{if(settings.content.status=t.status,settings.date=new Date,t.status>=200&&t.status<300)return t;fetch(settings.themeUrl+"html/404.html").then(t=>t.text()).then((function(t){settings.content.success=!1,settings.content.preview={response:null,mdcontent:null},document.write(t)}))}).then(t=>t.text()).then(t=>(settings.content.preview={response:t},settings.content.preview.mdcontent=marked(t),markdownrender(t))).then(t=>{fetch(settings.themeUrl+"html/200.html").then(t=>t.text()).then((function(t){settings.content.success=!0,document.write(t)}))}).catch(t=>(settings.content.preview.mdcontent=t.message,document.write(t.message),t.message))):"p"===settings.par?(blogging_info("Load post"),settings.content={url:decodeURIComponent(settings.post+getpar(settings.par)+".md")},fetch(settings.content.url).then(t=>{if(settings.content.status=t.status,settings.date=new Date,t.status>=200&&t.status<300)return t;fetch(settings.themeUrl+"html/404.html").then(t=>t.text()).then((function(t){settings.content.success=!1,settings.content.preview={response:null,mdcontent:null},document.write(t)}))}).then(t=>t.text()).then(t=>(settings.content.preview={response:t},settings.content.preview.mdcontent=marked(t),markdownrender(t))).then(t=>{fetch(settings.themeUrl+"html/200.html").then(t=>t.text()).then((function(t){settings.content.success=!0,document.write(t)}))}).catch((function(t){return settings.content.preview.mdcontent=t.message,document.write(t.message),t.message}))):"page"===settings.par&&(blogging_info("geting page"),settings.content={url:settings.themeUrl+"html/"+getpar(settings.par)+".html"},fetch(settings.content.url).then(t=>{if(settings.content.status=t.status,settings.date=new Date,t.status>=200&&t.status<300)return t;fetch(settings.themeUrl+"html/404.html").then(t=>t.text()).then((function(t){settings.content.success=!1,settings.content.preview={response:null,mdcontent:null},document.write(t)}))}).then(t=>t.text()).then(t=>{settings.content.success=!0,settings.content.preview={response:t},document.write(t)}))})).then(()=>{blogging_info("rendering content")});